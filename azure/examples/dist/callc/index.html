<!doctype html><html><head><title>callc example</title><script type="importmap">
   {
      "imports": {
      "twr-wasm": "../../lib-js/index.js"
      }
   }
   </script></head><body> <div id="twr_iodiv" tabindex="0">Loading... <br></div> <script type="module">let a;var t=globalThis,e={},r={},i=t.parcelRequire8dfc;null==i&&((i=function(a){if(a in e)return e[a].exports;if(a in r){var t=r[a];delete r[a];var i={id:a,exports:{}};return e[a]=i,t.call(i.exports,i,i.exports),i.exports}var o=Error("Cannot find module '"+a+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(a,t){r[a]=t},t.parcelRequire8dfc=i),(0,i.register)("e4cN9",function(a,t){a.exports=Promise.all([import("./../lib-js.runtime.83dcff59.js"),import("./../lib-js.cd9e67cf.js")]).then(()=>i("57pKS"))});var o={};o=new URL("../test-file.fabefebd.txt",import.meta.url).toString();try{let t;"#async"==window.location.hash?(a=new(await i("e4cN9")).twrWasmModuleAsync,document.getElementById("twr_iodiv").innerHTML="<br>",a.divLog("module type is twrWasmModuleAsync\n"),await a.loadWasm("./callc-a.wasm")):(a=new(await i("e4cN9")).twrWasmModule,document.getElementById("twr_iodiv").innerHTML="<br>",a.divLog("module type is twrWasmModule\n"),await a.loadWasm("./callc.wasm"));let e=await a.callC(["param_i32",1e5]);100001==e?a.divLog("param_i32 Success"):a.divLog("param_i32 FAIL");let r=BigInt(0x4000000000000);await a.callC(["param_i64",r])==r+1n?a.divLog("param_i64 Success"):a.divLog("param_i64 FAIL");let l=await a.callC(["param_f32",500.5]);501.5==l?a.divLog("param_f32 Success"):a.divLog("param_f32 FAIL");let c=await a.callC(["param_f64",100.2]);101.2==c?a.divLog("param_f64 Success"):a.divLog("param_f64 FAIL"),(t=await a.callC(["param_string","This is a string."]))?a.divLog("param_string Success"):a.divLog("param_string FAIL");let s=new Uint8Array(4);s[0]=99,s[1]=98,s[2]=97,s[3]=6;let g=await a.callC(["param_bytearray",s.buffer,s.length]);300==g?a.divLog("param_bytearray A Success"):a.divLog("param_bytearray A FAIL"),0==s[0]&&1==s[1]&&2==s[2]&&3==s[3]?a.divLog("param_bytearray B Success"):a.divLog("param_bytearray B FAIL");let d=new URL(o);(t=await a.callC(["param_uri",d]))?a.divLog("param_uri Success"):a.divLog("param_uri FAIL");let n=await a.callC(["ret_string"]);"forty-two - if only it were that simple"==a.getString(n)?a.divLog("ret_string Success"):a.divLog("ret_string FAIL");let m=await a.malloc(12),L=await a.malloc(4);a.setLong(m+0,1),a.mem8[m+4]=2,a.setLong(m+8,L),a.setLong(L,2e5),await a.callC(["do_struct",m]),t=(t=3==a.getLong(m+0))&&4==a.mem8[m+4];let u=a.getLong(m+8);t=(t=t&&u==L)&&200002==a.getLong(u),await a.callC(["free",L]),await a.callC(["free",m]),t?a.divLog("do_struct Success"):a.divLog("do_struct FAIL");let _=await a.callC(["get_structu32"]),p=a.getU32Arr(_);1==p[0]&&2e3==p[1]&&3==p[2]?a.divLog("get_structu32 Success"):a.divLog("get_structu32 FAIL"),_=await a.callC(["get_structu8"]);let w=a.getU8Arr(_);100==w[0]||101==w[1]||102==w[2]?a.divLog("get_structu32 Success"):a.divLog("get_structu32 FAIL")}catch(t){throw a.divLog("Unexpected exception!"),a.divLog(t),t}</script> </body></html>