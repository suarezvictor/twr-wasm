<!doctype html><html><head><title>callc example</title><script type="module" src="/examples/dist/helloworld/index.e96d9fe1.js"></script><script type="module" src="/examples/dist/helloworld/index.runtime.58b86402.js"></script><script type="importmap">
   {
      "imports": {
      "twr-wasm": "../../lib-js/index.js"
      }
   }
   </script></head><body> <div id="twr_iodiv" tabindex="0">Loading... <br></div> <script type="module">let a;var t=globalThis,e={},r={},l=t.parcelRequire8dfc;null==l&&((l=function(a){if(a in e)return e[a].exports;if(a in r){var t=r[a];delete r[a];var l={id:a,exports:{}};return e[a]=l,t.call(l.exports,l,l.exports),l.exports}var s=Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(a,t){r[a]=t},t.parcelRequire8dfc=l),l.register;var s=l("57pKS"),m={};m=new URL("../test-file.fabefebd.txt",import.meta.url).toString();try{let t;"#async"==window.location.hash?(a=new s.twrWasmModuleAsync,document.getElementById("twr_iodiv").innerHTML="<br>",a.log("module type is twrWasmModuleAsync\n"),await a.loadWasm("./callc-a.wasm")):(a=new s.twrWasmModule,document.getElementById("twr_iodiv").innerHTML="<br>",a.log("module type is twrWasmModule\n"),await a.loadWasm("./callc.wasm"));let e=await a.callC(["param_i32",1e5]);100001==e?a.log("param_i32 Success"):a.log("param_i32 FAIL");let r=BigInt(0x4000000000000);await a.callC(["param_i64",r])==r+1n?a.log("param_i64 Success"):a.log("param_i64 FAIL");let l=await a.callC(["param_f32",500.5]);501.5==l?a.log("param_f32 Success"):a.log("param_f32 FAIL");let o=await a.callC(["param_f64",100.2]);101.2==o?a.log("param_f64 Success"):a.log("param_f64 FAIL"),(t=await a.callC(["param_string","This is a string."]))?a.log("param_string Success"):a.log("param_string FAIL");let c=new Uint8Array(4);c[0]=99,c[1]=98,c[2]=97,c[3]=6;let i=await a.callC(["param_bytearray",c.buffer,c.length]);300==i?a.log("param_bytearray A Success"):a.log("param_bytearray A FAIL"),0==c[0]&&1==c[1]&&2==c[2]&&3==c[3]?a.log("param_bytearray B Success"):a.log("param_bytearray B FAIL");let g=new URL(m),[n,w]=await a.fetchAndPutURL(g);(t=await a.callC(["param_uri",n,w]))?a.log("param_uri Success"):a.log("param_uri FAIL");let u=await a.callC(["ret_string"]);"forty-two - if only it were that simple"==a.wasmMem.getString(u)?a.log("ret_string Success"):a.log("ret_string FAIL");let _=await a.wasmMem.malloc(12),p=await a.wasmMem.malloc(4);a.wasmMem.setLong(_+0,1),a.wasmMem.mem8[_+4]=2,a.wasmMem.setLong(_+8,p),a.wasmMem.setLong(p,2e5),await a.callC(["do_struct",_]),t=(t=3==a.wasmMem.getLong(_+0))&&4==a.wasmMem.mem8[_+4];let d=a.wasmMem.getLong(_+8);t=(t=t&&d==p)&&200002==a.wasmMem.getLong(d),await a.wasmMem.free(p),await a.wasmMem.free(_),t?a.log("do_struct Success"):a.log("do_struct FAIL");let f=await a.callC(["get_structu32"]),L=a.wasmMem.getU32Arr(f);1==L[0]&&2e3==L[1]&&3==L[2]?a.log("get_structu32 Success"):a.log("get_structu32 FAIL"),f=await a.callC(["get_structu8"]);let M=a.wasmMem.getU8Arr(f);100==M[0]||101==M[1]||102==M[2]?a.log("get_structu8 Success"):a.log("get_structu8 FAIL"),a.log("callC tests complete")}catch(t){throw a.log("Unexpected exception!"),a.log(t),t}</script> </body></html>