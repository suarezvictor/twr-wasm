
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Stream characters to a div or canvas tag. Input from stdin. Configure a canvas tag as a terminal-console. With twr-wasm lib.">
      
      
      
        <link rel="canonical" href="https://twiddlingbits.dev/docsite/gettingstarted/stdio/">
      
      
        <link rel="prev" href="../parameters/">
      
      
        <link rel="next" href="../events/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.28">
    
    
      
        <title>Consoles with C/C++ WebAssembly (stdio, stderr, more) - Easier WebAssembly with twr-wasm</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview-of-consoles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Easier WebAssembly with twr-wasm" class="md-header__button md-logo" aria-label="Easier WebAssembly with twr-wasm" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Easier WebAssembly with twr-wasm
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Consoles with C/C++ WebAssembly (stdio, stderr, more)
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/twiddlingbits/twr-wasm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../installation/" class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/examples-overview/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/api-c-general/" class="md-tabs__link">
          
  
  C/C++ API

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/api-ts-modules/" class="md-tabs__link">
          
  
  TypeScript API

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../more/wasm-problem/" class="md-tabs__link">
          
  
  More

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Easier WebAssembly with twr-wasm" class="md-nav__button md-logo" aria-label="Easier WebAssembly with twr-wasm" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Easier WebAssembly with twr-wasm
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/twiddlingbits/twr-wasm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../helloworld/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello World
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basicsteps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Steps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Passing Arguments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Consoles
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Consoles
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-example" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Running Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Capabilities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tag-shortcuts" class="md-nav__link">
    <span class="md-ellipsis">
      Tag Shortcuts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#console-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Console Classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-consoles-with-names" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Consoles with Names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-stdio-and-stderr" class="md-nav__link">
    <span class="md-ellipsis">
      Setting stdio and stderr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utf-8-or-windows-1252" class="md-nav__link">
    <span class="md-ellipsis">
      UTF-8 or Windows-1252
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-access-to-consoles" class="md-nav__link">
    <span class="md-ellipsis">
      C Access To Consoles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C Access To Consoles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io_functions" class="md-nav__link">
    <span class="md-ellipsis">
      io_functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d2d_functions" class="md-nav__link">
    <span class="md-ellipsis">
      d2d_functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-from-a-console" class="md-nav__link">
    <span class="md-ellipsis">
      Reading from a Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-c-library-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Standard C Library Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Standard C Library Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdout-and-stderr-functions" class="md-nav__link">
    <span class="md-ellipsis">
      stdout and stderr functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../charencoding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Character Encoding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compiler-opts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compiler, Linker, Memory
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-helloworld/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hello world
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-divcon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    divcon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-terminal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    terminal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-multi-io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    multi-io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-fft/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fft
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-balls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    balls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-pong/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pong
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-maze/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    maze
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-callc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    callC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-lib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/examples-libcxx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libc++
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C/C++ API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            C/C++ API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-c-general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-c-localization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Localization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-c-d2d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Draw 2D
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-c-con/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Console Char I/O
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-c-stdlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard C Library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-libcpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    libc++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-c-audio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Audio
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    TypeScript API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            TypeScript API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-ts-modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-ts-consoles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Consoles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-ts-memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/api-ts-library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Libraries
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    More
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            More
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../more/wasm-problem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wasm Runtime Limitations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../more/imports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Import Resolution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../more/production/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SharedArrayBuffers Note
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../more/building/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building the Source
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-example" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Running Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Capabilities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tag-shortcuts" class="md-nav__link">
    <span class="md-ellipsis">
      Tag Shortcuts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#console-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Console Classes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-consoles-with-names" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Consoles with Names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-stdio-and-stderr" class="md-nav__link">
    <span class="md-ellipsis">
      Setting stdio and stderr
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utf-8-or-windows-1252" class="md-nav__link">
    <span class="md-ellipsis">
      UTF-8 or Windows-1252
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-access-to-consoles" class="md-nav__link">
    <span class="md-ellipsis">
      C Access To Consoles
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C Access To Consoles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io_functions" class="md-nav__link">
    <span class="md-ellipsis">
      io_functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d2d_functions" class="md-nav__link">
    <span class="md-ellipsis">
      d2d_functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-from-a-console" class="md-nav__link">
    <span class="md-ellipsis">
      Reading from a Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-c-library-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Standard C Library Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Standard C Library Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stdout-and-stderr-functions" class="md-nav__link">
    <span class="md-ellipsis">
      stdout and stderr functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="overview-of-consoles">Overview of Consoles</h1>
<p>This section describes how to use twr-wasm to:</p>
<ul>
<li>create input/output consoles for use by C/C++ with WebAssembly</li>
<li>direct stdin, stdout and stderr to a console</li>
<li>use addressable display and canvas 2D consoles</li>
<li>use multiple consoles at once</li>
</ul>
<h2 id="quick-example">Quick Example</h2>
<div class="language-c highlight"><span class="filename">Hello World</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kt">void</span><span class="w"> </span><span class="nf">hello</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;hello world</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">}</span>
</span></code></pre></div>
<div class="language-js highlight"><span class="filename">Using twrConsoleDiv</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">   </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;console-tag&quot;</span><span class="o">&gt;&lt;</span><span class="err">/div&gt;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">   </span><span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="o">&gt;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">      </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">twrConsoleDiv</span><span class="p">,</span><span class="w"> </span><span class="nx">twrWasmModule</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;twr-wasm&quot;</span><span class="p">;</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">tag</span><span class="o">=</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;console-tag&quot;</span><span class="p">);</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">streamConsole</span><span class="o">=</span><span class="ow">new</span><span class="w"> </span><span class="nx">twrConsoleDiv</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span><span class="w"> </span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">twrWasmModule</span><span class="p">({</span><span class="nx">stdio</span><span class="o">:</span><span class="w"> </span><span class="nx">streamConsole</span><span class="p">});</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">mod</span><span class="p">.</span><span class="nx">loadWasm</span><span class="p">(</span><span class="s2">&quot;./helloworld.wasm&quot;</span><span class="p">);</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">mod</span><span class="p">.</span><span class="nx">callC</span><span class="p">([</span><span class="s2">&quot;hello&quot;</span><span class="p">]);</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">   </span><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="o">&lt;</span><span class="err">/body&gt;</span>
</span></code></pre></div>
<div class="language-js highlight"><span class="filename">Using twr_iodiv Shortcut</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">   </span><span class="o">&lt;</span><span class="nx">div</span><span class="w"> </span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;twr_iodiv&quot;</span><span class="o">&gt;&lt;</span><span class="err">/div&gt;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">   </span><span class="o">&lt;</span><span class="nx">script</span><span class="w"> </span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="o">&gt;</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">      </span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="nx">twrWasmModule</span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;twr-wasm&quot;</span><span class="p">;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">twrWasmModule</span><span class="p">();</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">mod</span><span class="p">.</span><span class="nx">loadWasm</span><span class="p">(</span><span class="s2">&quot;./helloworld.wasm&quot;</span><span class="p">);</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="nx">mod</span><span class="p">.</span><span class="nx">callC</span><span class="p">([</span><span class="s2">&quot;hello&quot;</span><span class="p">]);</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">   </span><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="o">&lt;</span><span class="err">/body&gt;</span>
</span></code></pre></div>
<h2 id="running-examples">Running Examples</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>View Live Link</th>
<th>Source Link</th>
</tr>
</thead>
<tbody>
<tr>
<td>stdin and stdout to <code>&lt;div&gt;</code></td>
<td><a href="/examples/dist/divcon/index.html">View square demo</a></td>
<td><a href="https://github.com/twiddlingbits/twr-wasm/tree/main/examples/divcon">Source</a></td>
</tr>
<tr>
<td>simple "terminal" via <code>&lt;canvas&gt;</code></td>
<td><a href="/examples/dist/terminal/index.html">View hello world demo</a></td>
<td><a href="https://github.com/twiddlingbits/twr-wasm/tree/main/examples/terminal">Source</a></td>
</tr>
<tr>
<td>"cli" with a <code>&lt;canvas&gt;</code> stdio</td>
<td><a href="/examples/dist/tests-user/index.html">View CLI demo using libc++</a></td>
<td><a href="https://github.com/twiddlingbits/twr-wasm/tree/main/examples/tests-user">Source</a></td>
</tr>
<tr>
<td>Multiple Consoles, including Canvas2D</td>
<td><a href="../../examples/examples-multi-io/">View multi-io demo</a></td>
<td><a href="https://github.com/twiddlingbits/twr-wasm/tree/main/examples/multi-io">Source</a></td>
</tr>
</tbody>
</table>
<h2 id="capabilities">Capabilities</h2>
<p>With a Console you can:</p>
<ul>
<li>read character streams (Use C statements like  <a href="../../api/api-c-general/#getc"><code>getc</code></a> or <a href="../../api/api-c-con/#io_mbgets"><code>io_mbgets</code></a>)</li>
<li>write character streams (use C statements like <code>printf</code> or <code>cout</code>)</li>
<li>position characters, graphics, colors with an addressable display (Use C statements like <a href="../../api/api-c-con/#io_setc32"><code>io_setc32</code></a> or <a href="../../api/api-c-con/#io_set_cursor"><code>io_set_cursor</code></a>).</li>
<li>draw to a Canvas compatible 2D surface (Use C statements like <a href="../../api/api-c-d2d/"><code>d2d_fillrect</code></a>).</li>
</ul>
<p>Consoles are primarily designed for use by twr-wasm C/C++ modules, but they can also be used by JavaScript/TypeScript.</p>
<p>Although it is common to have a single console, an arbitrary number of consoles can be created, and they can be used by an arbitrary number of twr-wasm C/C++ modules.</p>
<p>Unicode characters are supported by consoles (see <a href="../charencoding/">Character Encoding Support with twr-wasm</a>).</p>
<h2 id="tag-shortcuts">Tag Shortcuts</h2>
<p>If you add a <code>&lt;div id="twr_iodiv"&gt;</code>, a <code>&lt;canvas id="twr_iocanvas"&gt;</code>, or a <code>&lt;canvas id="twr_d2dcanvas"&gt;</code> tag to your HTML, twr-wasm will create the appropriate class for you when you instantiate the class <code>twrWasmModule</code> or <code>twrWasmModuleAsync</code>.  Use these tag shortcuts as an aternative to instantiating the console classes in your JavaScript/TypeScript.</p>
<ul>
<li><code>&lt;div id="twr_iodiv"&gt;</code> will be used to create a <code>twrConsoleDiv</code> as <code>stdio</code></li>
<li><code>&lt;canvas id="twr_iocanvas"&gt;</code> will be used to create a <code>twrConsoleTerminal</code> as <code>stdio</code>. </li>
<li><code>&lt;canvas id="twr_d2dcanvas"&gt;</code> will be used to create a <code>twrConsoleCanvas</code> as <code>std2d</code> -- the default 2D drawing surface.  See <a href="../../api/api-c-d2d/">2D drawing APIs.</a></li>
</ul>
<p>If neither of the above <code>&lt;div&gt;</code> or <code>&lt;canvas&gt;</code> is defined in your HTML, and if you <a href="#multiple-consoles-with-names">have not set <code>stdio</code> via the <code>io</code> or <code>stdio</code> module options</a>, then <code>stdout</code> is sent to the debug console in your browser. And <code>stdin</code> is not available.</p>
<h2 id="console-classes">Console Classes</h2>
<p>Consoles are implemented in TypeScript and run in the JavaScript main thread.  This allows consoles to be shared by multiple wasm modules.</p>
<p>For simple cases, when you use the tag shortcuts, you won't need to use these console classes directly.  For more bespoke cases, they will come in handy. For details on console classes, see the <a href="../../api/api-ts-consoles/">TypeScript/JavaScript API reference</a></p>
<p>These conosle classes are available in twr-wasm:  </p>
<ul>
<li><a href="../../api/api-ts-consoles/#class-twrconsolediv"><code>twrConsoleDiv</code></a> streams character input and output to a div tag </li>
<li><a href="../../api/api-ts-consoles/#class-twrconsoleterminal"><code>twrConsoleTerminal</code></a> provides streaming or addressable character input and output using a canvas tag.</li>
<li><a href="../../api/api-ts-consoles/#class-twrconsoledebug"><code>twrConsoleDebug</code></a> streamings characters to the browser debug console.</li>
<li><a href="../../api/api-ts-consoles/#class-twrconsolecanvas"><code>twrConsoleCanvas</code></a> creates a 2D drawing surface that the Canvas compatible <a href="../../api/api-c-d2d/">2d drawing APIs</a> can be used with.</li>
</ul>
<h2 id="multiple-consoles-with-names">Multiple Consoles with Names</h2>
<p>When you instantiate a class <code>twrWasmModule</code> or <code>twrWasmModuleAsync</code>, you can pass it the module option <code>io</code> -- a javascript object containing name-console attributes. Your C/C++ code can then retrieve a console by name.  This is described in more detail the <a href="../../api/api-ts-modules/#io-option-multiple-consoles-with-names">TypeScript/JavaScript API Reference.</a></p>
<p>Also see the <a href="../../examples/examples-multi-io/">multi-io example</a>.</p>
<h2 id="setting-stdio-and-stderr">Setting stdio and stderr</h2>
<p><code>stdio</code> can be defined automatically if you use a Tag Shortcut. <code>stderr</code> streams to the browser's debug console by default. Both can be set to a specific console <a href="../../api/api-ts-modules/#io-option-multiple-consoles-with-names">with the module <code>io</code> option.</a></p>
<p>For example, given:</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">const</span><span class="w"> </span><span class="n">tag</span><span class="o">=</span><span class="n">document</span><span class="p">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&quot;console-tag&quot;</span><span class="p">);</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">const</span><span class="w"> </span><span class="n">streamConsole</span><span class="o">=</span><span class="n">new</span><span class="w"> </span><span class="n">twrConsoleDiv</span><span class="p">(</span><span class="n">tag</span><span class="p">);</span>
</span></code></pre></div>
<p>Either of these will set <code>stdio</code> to a streaming <code>div</code> console:</p>
<p><div class="language-c highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">const</span><span class="w"> </span><span class="n">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">twrWasmModule</span><span class="p">({</span><span class="n">stdio</span><span class="o">:</span><span class="w"> </span><span class="n">streamConsole</span><span class="p">});</span>
</span></code></pre></div>
<div class="language-c highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">const</span><span class="w"> </span><span class="n">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">twrWasmModule</span><span class="p">({</span><span class="w"> </span><span class="n">io</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="n">stdio</span><span class="o">:</span><span class="w"> </span><span class="n">streamConsole</span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
</span></code></pre></div></p>
<p>This option would send stderr and stdio to the same console:</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">const</span><span class="w"> </span><span class="n">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">twrWasmModule</span><span class="p">({</span><span class="w"> </span><span class="n">io</span><span class="o">:</span><span class="w"> </span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">   </span><span class="p">{</span><span class="n">stdio</span><span class="o">:</span><span class="w"> </span><span class="n">streamConsole</span><span class="p">,</span><span class="w"> </span><span class="n">stderr</span><span class="o">:</span><span class="w"> </span><span class="n">streamConsole</span><span class="p">}</span><span class="w"> </span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="p">});</span>
</span></code></pre></div>
<h2 id="utf-8-or-windows-1252">UTF-8 or Windows-1252</h2>
<p>Consoles can support UTF-8 or Windows-1252 character encodings (see <a href="../charencoding/">Character Encoding Support with twr-wasm</a>).</p>
<h2 id="c-access-to-consoles">C Access To Consoles</h2>
<h3 id="io_functions">io_functions</h3>
<p><code>io_functions</code> <a href="../../api/api-c-con/">are available to operate on </a> all character based Consoles.</p>
<h3 id="d2d_functions">d2d_functions</h3>
<p><code>d2d_functions</code> <a href="../../api/api-c-d2d/">are available to operate on</a> Canvas 2D Consoles.</p>
<h3 id="reading-from-a-console">Reading from a Console</h3>
<p>Reading from a console is blocking, and so <a href="../../api/api-ts-modules/#class-twrwasmmoduleasync"><code>twrWasmModuleAsync</code> must be used to receive keys.</a> There are some specific requirements to note in the <code>twrWasmModuleAsync</code> API docs.</p>
<p>You can get characters with any of these functions:</p>
<ul>
<li><code>io_mbgets</code> - get a multibyte string from a console using the current locale character encoding.   Console must support IO_TYPE_CHARREAD.</li>
<li><code>twr_mbgets</code> - the same as <code>io_mbgets</code> with the console set to <code>stdin</code>.</li>
<li><code>io_mbgetc</code> - get a multibyte character from an <code>twr_ioconsole_t *</code> (aka <code>FILE *</code>) like <code>stdin</code> using the current locale character encoding</li>
<li><code>getc</code> (same as <code>fgetc</code>) - get a single byte from a <code>FILE *</code> (aka <code>twr_ioconsole_t *</code>) -- returning ASCII or extended ASCII (window-1252 encoding)</li>
<li><code>io_getc32</code> - gets a 32 bit unicode code point from an <code>twr_ioconsole_t *</code> (which must support IO_TYPE_CHARREAD)</li>
</ul>
<h3 id="standard-c-library-functions">Standard C Library Functions</h3>
<p>Many of the common standard C library functions, plus twr-wasm specific functions, are available to stream characters to and from the standard input and output console that supports character streaming (most do).</p>
<p>In C, a console is represented by <code>twr_ioconsole_t</code>.  In addition, <code>FILE</code> is the same as a <code>twr_ioconsole_t</code> (<code>typedef twr_ioconsole_t FILE</code>).  <code>stdout</code>, <code>stdin</code>, <code>stderr</code> are all consoles.</p>
<p><code>#include &lt;stdio.h&gt;</code> to access <code>stdout</code>, <code>stdin</code>, <code>stderr</code>, and <code>FILE</code>.</p>
<p><code>FILE</code> is supported for user input and output, and for stderr.  <code>FILE</code> as filesystem I/O is not currently supported.</p>
<h4 id="stdout-and-stderr-functions">stdout and stderr functions</h4>
<p>You can use these functions to output to the standard library defines <code>stderr</code> or <code>stdout</code>:
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>fputc, putc, vfprintf, fprintf, fwrite
</span></code></pre></div></p>
<p>These functions go to <code>stdout</code>:
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>printf, vprintf, puts, putchar
</span></code></pre></div></p>
<p>Note that when characters are sent to the browser console using <code>stderr</code> they will not render to the console until a newline, return, or ASCII 03 (End-of-Text) is sent.</p>
<p>For example:
<div class="language-c highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hello over there in browser debug console land</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span></code></pre></div></p>
<p>A more common method to send output to the debug console <a href="../../api/api-c-general/#twr_conlog">is to use <code>twr_conlog</code>.</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>